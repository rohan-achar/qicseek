<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>HelpOnInstalling/FastCgi - GraphModAlg@UCI</title>
<script type="text/javascript" src="/moin_static163/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static163/rightsidebar/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="/moin_static163/rightsidebar/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="/moin_static163/rightsidebar/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="/moin_static163/rightsidebar/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static163/rightsidebar/css/msie.css">
<![endif]-->


<link rel="alternate" title="GraphModAlg@UCI: HelpOnInstalling/FastCgi" href="/group/action/rss_rc/HelpOnInstalling/FastCgi?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=HelpOnInstalling%2FFastCgi&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="/group/Main_Page">
<link rel="Alternate" title="Wiki Markup" href="/group/HelpOnInstalling/FastCgi?action=raw">
<link rel="Alternate" media="print" title="Print View" href="/group/HelpOnInstalling/FastCgi?action=print">
<link rel="Up" href="/group/HelpOnInstalling">
<link rel="Search" href="/group/FindPage">
<link rel="Index" href="/group/TitleIndex">
<link rel="Glossary" href="/group/WordIndex">
<link rel="Help" href="/group/HelpOnFormatting">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="/group/HelpOnInstalling/FastCgi">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="/group/Main_Page"><img src="/moin_static163/common/moinmoin.png" alt="MoinMoin Logo"></a></div>
<div id="locationline">


<ul id="pagelocation">
<li><a href="/group/HelpOnInstalling">HelpOnInstalling</a></li><li><a class="backlink" href="/group/action/fullsearch/HelpOnInstalling/FastCgi?action=fullsearch&amp;context=180&amp;value=linkto%3A%22HelpOnInstalling%2FFastCgi%22" rel="nofollow" title="Click to do a full-text search for this title">FastCgi</a></li>
</ul>

</div>

</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="/group/Main_Page">Main_Page</a></li><li class="wikilink"><a href="/group/RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="/group/FindPage">FindPage</a></li><li class="wikilink"><a href="/group/HelpContents">HelpContents</a></li><li class="current"><a href="/group/HelpOnInstalling/FastCgi">HelpOnInstalling/FastCgi</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="/group/action/info/HelpOnInstalling/FastCgi?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="/group/action/AttachFile/HelpOnInstalling/FastCgi?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/group/HelpOnInstalling/FastCgi">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="Load">Load</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="/group/action/login/HelpOnInstalling/FastCgi?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><p class="line874">FastCGI is a method which enables a web server to communicate with long-running scripts. This has the advantage that the script is only <span class="anchor" id="line-11"></span>started and initialized one time, and that data could be cached in memory from request to request, enhancing the performance of the CGI application. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="/!\" height="15" src="/moin_static163/rightsidebar/img/alert.png" title="/!\" width="15" /> Follow the basic installation for your operating system as described in other parts of the <a href="/group/MoinMoin">MoinMoin</a> installation documentation. This is <a href="/group/HelpOnInstalling/BasicInstallation">HelpOnInstalling/BasicInstallation</a> and <a href="/group/HelpOnInstalling/WikiInstanceCreation">HelpOnInstalling/WikiInstanceCreation</a>, or <a href="/group/HelpOnInstalling/ApacheOnLinux">HelpOnInstalling/ApacheOnLinux</a> in most cases.  <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span></li></ul><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Using_MoinMoin_with_FastCgi">Using MoinMoin with FastCgi</a></li><li>
<a href="#Deploying_on_Apache">Deploying on Apache</a><ol><li>
<a href="#Script_options">Script options</a></li><li>
<a href="#FastCgiExternalServer">FastCgiExternalServer</a></li><li>
<a href="#FastCgiServer">FastCgiServer</a></li><li>
<a href="#Example_for_Apache2_on_Debian">Example for Apache2 on Debian</a></li><li>
<a href="#Running_as_an_external_application_and.2BAC8-or_on_Windows">Running as an external application and/or on Windows</a></li><li>
<a href="#Fallback_to_CGI_if_FastCGI_is_not_available">Fallback to CGI if FastCGI is not available</a></li></ol></li><li>
<a href="#Deploying_on_lighttpd">Deploying on lighttpd</a><ol><li>
<a href="#Configuration">Configuration</a></li><li>
<a href="#Starting_MoinMoin_instance">Starting MoinMoin instance</a></li><li>
<a href="#Multiple_moin_processes">Multiple moin processes</a><ol><li>
<a href="#Optional:_striping_.2BAC8-mywiki_from_URI">Optional: striping /mywiki from URI</a></li></ol></li><li>
<a href="#Multiple_moin_processes_automatically_started_by_lighttpd">Multiple moin processes automatically started by lighttpd</a></li><li>
<a href="#MoinMoin_Startup_script">MoinMoin Startup script</a></li><li>
<a href="#Adding_MoinMoin_startup_script_on_Mac_OS_X">Adding MoinMoin startup script on Mac OS X</a></li><li>
<a href="#Using_HTTP_Authentication">Using HTTP Authentication</a></li><li>
<a href="#Root_wiki_example">Root wiki example</a></li><li>
<a href="#A.28sub.29domain_root_wiki">(sub)domain root wiki</a><ol><li>
<a href="#lighttpd_configuration">lighttpd configuration</a></li><li>
<a href="#MoinMoin_configration">MoinMoin configration</a></li></ol></li></ol></li></ol></li></ol></div> <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867">
<h2 id="Using_MoinMoin_with_FastCgi">Using MoinMoin with FastCgi</h2>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">For more general information: <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><ul><li><p class="line891"><a class="http" href="http://fastcgi.com">http://fastcgi.com</a> - FastCGI Homepage <span class="anchor" id="line-23"></span></li><li><p class="line891"><a class="http" href="http://cryp.to/publications/fastcgi/">FastCGI â€” The Forgotten Treasure</a> (introduction) <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></li></ul><p class="line867">
<h2 id="Deploying_on_Apache">Deploying on Apache</h2>
<span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line862">To deploy <a href="/group/MoinMoin">MoinMoin</a> using FastCGI you need an apache with mod_fastcgi. Please refer to the documentation of mod_fastcgi ( <a class="http" href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html">mod_fastcgi homepage</a> ). <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line862">Don't forget to install the fastcgi Apache module (e.g. libapache2-mod-fastcgi). Then in places where the documentation refers to <tt class="backtick">moin.cgi</tt> you use <tt class="backtick">moin.fcg</tt> instead. Be sure that <strong>.fcg</strong> is handled by the FastCGI module (<tt class="backtick">AddHandler&nbsp;fastcgi-script&nbsp;.fcg</tt> in your apache config). <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><p class="line862">Normally Apache will start CGI scripts with its own user and group, or with the user and group of the VirtualHost if you are using the suexec wrapper. To enable this with FastCGI you need to use <tt class="backtick">FastCgiWrapper&nbsp;On</tt> in your Apache config (check your distributions and/or FastCGI Documentation). <span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line874">Be sure to restart your Apache after you changed py files (i.e. the config) for a running FastCGI server, or you won't see any changes! <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line867">
<h3 id="Script_options">Script options</h3>
<span class="anchor" id="line-36"></span><p class="line874">No matter how and where you install or how you configure, you can add some options (in Apache config or as self-running process). Here is a list of some options. <span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><p class="line867">
<h3 id="FastCgiExternalServer">FastCgiExternalServer</h3>
<span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><p class="line867"><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1"></span>-host [hostname:port]     - The port and on what host name to respond.
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2"></span>-idle-timeout [seconds]   - The number of seconds of inactivity allowed before request is aborted.</pre><p class="line874"> <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line867">
<h3 id="FastCgiServer">FastCgiServer</h3>
<span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line867"><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-1"></span>-port [port]              - The port the application will use for communication with the web server.
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-1"></span>-idle-timeout [seconds]   - The number of seconds of inactivity allowed before request is aborted.</pre><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line867">
<h3 id="Example_for_Apache2_on_Debian">Example for Apache2 on Debian</h3>
<span class="anchor" id="line-55"></span><p class="line874">Edit the /etc/apache2/conf.d/your_wiki: <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-2"></span>&lt;IfModule mod_fastcgi.c&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-2"></span>   AddHandler fastcgi-script .fcgi .fcg
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3"></span>   FastCgiServer /your/path/to/moin.fcg -idle-timeout 60 -processes 1
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4"></span>   ScriptAlias /your_wiki "/your/path/to/moin.fcg"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5"></span>&lt;/IfModule&gt;</pre><span class="anchor" id="line-63"></span><ul><li>number of processes depends on your hardware.. <span class="anchor" id="line-64"></span></li></ul><p class="line874">Expand the Apache installation: <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-3"></span>apt-get install libapache2-mod-fastcgi
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-3"></span>a2enmod fastcgi
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-1"></span>apache2ctl graceful</pre><span class="anchor" id="line-70"></span><p class="line874">Now, your wiki should respond a little faster. <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><p class="line867">
<h3 id="Running_as_an_external_application_and.2BAC8-or_on_Windows">Running as an external application and/or on Windows</h3>
<span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><p class="line867"><em>(see also <a href="/group/HelpOnInstalling/ApacheOnWin32withFastCgi">../ApacheOnWin32withFastCgi</a> for a Windows-specific how-to)</em> <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><p class="line867">MoinMoin can be run as an external application that answers FastCGI request via a local TCP/IP socket. This works on Windows as well. All you need to do (after having installed <tt class="backtick">mod_fastcgi</tt> and a working MoinMoin instance) is this: <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><ol type="1"><li>Select a port number for the internal communication. It should be larger than 1023. For this example, we chose 8888 (just for fun). <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span></li><li class="gap"><p class="line862">Add the following lines to your httpd.conf:<span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-4"></span>Alias /moin.fcg "/your/path/to/moin.fcg"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-4"></span>FastCgiExternalServer "/your/path/to/moin.fcg" -host localhost:8888</pre><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span></li><li class="gap"><p class="line862">Edit <tt class="backtick">moin.fcg</tt>. Replace<span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-5"></span>fcg = thfcgi.FCGI(handle_request, max_requests=max_requests, backlog=backlog, max_threads=max_threads)</pre><p class="line862"> with <span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-6"></span>fcg = thfcgi.FCGI(handle_request, 0, 8888, max_requests=max_requests, backlog=backlog, max_threads=max_threads)</pre><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span></li><li class="gap"><p class="line862">Start the file <tt class="backtick">moin.fcg</tt> manually like a Python script:<span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-7"></span>python moin.fcg</pre><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span></li><li class="gap">Start Apache. <span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span></li></ol><p class="line867">
<h3 id="Fallback_to_CGI_if_FastCGI_is_not_available">Fallback to CGI if FastCGI is not available</h3>
<span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><p class="line862">Install and test <a href="/group/MoinMoin">MoinMoin</a> according to <a href="/group/HelpOnInstalling/ApacheOnLinux">HelpOnInstalling/ApacheOnLinux</a>. Then make and test the changes to run mod_fastcgi. If you are satisfied, you can add the following block to your apache config: <span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-8"></span>&lt;IfModule !mod_fastcgi.c&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-5"></span>    ScriptAlias /mywiki "/your/path/to/moin.cgi"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-2"></span>&lt;/IfModule&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-1"></span>&lt;IfModule mod_fastcgi.c&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-1"></span>    AddHandler fastcgi-script .fcg
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6"></span>    ScriptAlias /mywiki "/your/path/to/moin.fcg"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7"></span>&lt;/IfModule&gt;</pre><span class="anchor" id="line-110"></span><p class="line874">Now Apache will use mod_fastcgi if available and otherwise use the slow cgi script. <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><p class="line867">
<h2 id="Deploying_on_lighttpd">Deploying on lighttpd</h2>
<span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><p class="line874">The best option is to run moin as external application. In this case, you don't need to restart the web server when you want to restart moin. <span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="{i}" height="16" src="/moin_static163/rightsidebar/img/icon-info.png" title="{i}" width="16" /> Before you start please check that you have installed the FastCGI module for lighttpd. You can not use the one from Apache and this is usually not part of the lighttpd package  <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span></li></ul><p class="line867">
<h3 id="Configuration">Configuration</h3>
<span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><p class="line867"><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-9"></span>fastcgi.server = ( "/mywiki" =&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-6"></span>                       ( "localhost" =&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-3"></span>                         (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-2"></span>                           "host" =&gt; "127.0.0.1",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-2"></span>                           "port" =&gt; 8888,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6-1"></span>                           "check-local" =&gt; "disable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7-1"></span>                           "broken-scriptfilename" =&gt; "enable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-8"></span>                         )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9"></span>                       )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10"></span>                   )</pre><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><p class="line874">Add an alias for your themes: <span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-10"></span>alias.url = ( "/wiki/" =&gt; "/usr/share/moin/htdocs/" )</pre><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><p class="line867">
<h3 id="Starting_MoinMoin_instance">Starting MoinMoin instance</h3>
<span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><p class="line862">To start a <a href="/group/MoinMoin">MoinMoin</a> instance, execute the file <tt class="backtick">moin.fcg</tt> manually like this: <span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><p class="line867"><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-11"></span>python moin.fcg</pre><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="{i}" height="16" src="/moin_static163/rightsidebar/img/icon-info.png" title="{i}" width="16" /> The <a href="/group/MoinMoin">MoinMoin</a> process does not need to be run as root or www, but can also be run as a simple user. <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span></li></ul><p class="line867">
<h3 id="Multiple_moin_processes">Multiple moin processes</h3>
<span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><p class="line874">If you start multiple moin instances on different ports, lighttpd balance the load automatically between them, using all the cpus. <span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><p class="line874">Use this configuration: <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-12"></span>fastcgi.server             = ( "/mywiki" =&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-7"></span>                               ( "localhost" =&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-4"></span>                                 ( "host" =&gt; "127.0.0.1", 
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-3"></span>                                   "port" =&gt; 1080,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-3"></span>                                   "check-local" =&gt; "disable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6-2"></span>                                   "broken-scriptfilename" =&gt; "enable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7-2"></span>                                 ),
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-8-1"></span>                                 ( "host" =&gt; "127.0.0.1", 
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9-1"></span>                                   "port" =&gt; 1081, 
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10-1"></span>                                   "check-local" =&gt; "disable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-11"></span>                                   "broken-scriptfilename" =&gt; "enable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-12"></span>                                 ),
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-13"></span>                               )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-14"></span>                             )</pre><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><p class="line867">
<h4 id="Optional:_striping_.2BAC8-mywiki_from_URI">Optional: striping /mywiki from URI</h4>
<span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><p class="line874">If you want to strip /mywiki from URI, you should edit your moin.fcg script: <span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><p class="line867"><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-13"></span>request = request_fcgi.Request(req, env, form, properties={'script_name': '/'})</pre><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><p class="line867">
<h3 id="Multiple_moin_processes_automatically_started_by_lighttpd">Multiple moin processes automatically started by lighttpd</h3>
<span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><p class="line874">As an alternative to manually starting multiple processes of moin.fcg and assigning a distinct TCP port to each, this task can be delegated to lighttpd itself. The key is to specify "bin-path" option to fastcgi.server, and to allow multiple moin.fcg processes to be started as configured by "min-procs" and "max-procs" options. The hidden trick is that lighttpd will allocate successive TCP port numbers to each process, starting with "port". <span class="anchor" id="line-183"></span>Tested with lighttpd 1.4.10. <span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><p class="line874">Example: <span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-14"></span>fastcgi.server = (  "/mywiki" =&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-8"></span>  (( "docroot"   =&gt; "/",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-5"></span>     "min-procs" =&gt; 4,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-4"></span>     "max-procs" =&gt; 4,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-4"></span>     # allocate successive port numbers for each process, starting with "port"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6-3"></span>     "bin-path"  =&gt; "/usr/local/bin/moin.fcg",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7-3"></span>     "host"      =&gt; "127.0.0.1",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-8-2"></span>     "port"      =&gt; 2200,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9-2"></span>     "check-local" =&gt; "disable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10-2"></span>     "broken-scriptfilename" =&gt; "enable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-11-1"></span>  ))
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-12-1"></span>)</pre><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><p class="line867">
<h3 id="MoinMoin_Startup_script">MoinMoin Startup script</h3>
<span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><p class="line862">Here is a startup script for Mac OS X, using <a class="nonexistent" href="/group/DarwinPortsStartup">DarwinPortsStartup</a> system. It is probably useful for other unix like platforms. <span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><p class="line867"><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-15"></span># Start and stop multiple moin fast cgi instances runnings on PORTS
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-9"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-6"></span>NAME="moin"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-5"></span>DIR="/www/org.mywiki/bin"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-5"></span>FCGIAPP="./moin.fcg"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6-4"></span>PREFIX="/usr/local"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7-4"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-8-3"></span># List of ports to start moin instances on, separated with whitesapce
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9-3"></span># Keep in sync with fastcgi.server in lighttpd.conf
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10-3"></span>PORTS="1080 1081"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-11-2"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-12-2"></span>start_on_port () {
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-13-1"></span>    # Start moin instance on port, leaving pid file
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-14-1"></span>    port=$1
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-15"></span>    
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-16"></span>    cd "${DIR}" &amp;&amp; sudo -u www "${PREFIX}/bin/spawn-fcgi" \
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-17"></span>        -f "${FCGIAPP}" \
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-18"></span>        -p $port \
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-19"></span>        -P "${NAME}-${port}.pid" \
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-20"></span>        &gt; /dev/null
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-21"></span>}
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-22"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-23"></span>kill_on_port () {
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-24"></span>    # Try to kill process using pid in pid file, then remove the pid file
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-25"></span>    pidFile="${DIR}/${NAME}-$1.pid"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-26"></span>    kill `cat "$pidFile"` &amp;&amp; rm -f "$pidFile" &gt; /dev/null 
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-27"></span>}
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-28"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-29"></span>start () {
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-30"></span>    for port in $PORTS; do start_on_port $port; done 
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-31"></span>}
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-32"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-33"></span>stop () {
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-34"></span>    for port in $PORTS; do kill_on_port $port; done
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-35"></span>}
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-36"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-37"></span>case "$1" in
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-38"></span>start)
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-39"></span>    # XXX starting twice will break pid files (bug in spawn-fcgi)
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-40"></span>    start &amp;&amp; echo -n " $NAME"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-41"></span>        ;;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-42"></span>stop)
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-43"></span>        stop &amp;&amp; echo -n " $NAME"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-44"></span>        ;;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-45"></span>restart)
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-46"></span>    stop
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-47"></span>    start &amp;&amp; echo -n " $NAME"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-48"></span>        ;;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-49"></span>*)
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-50"></span>        echo "Usage: `basename $0` {start|stop|restart}" &gt;&amp;2
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-51"></span>        ;;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-52"></span>esac
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-53"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-54"></span>exit 0</pre><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><p class="line867">
<h3 id="Adding_MoinMoin_startup_script_on_Mac_OS_X">Adding MoinMoin startup script on Mac OS X</h3>
<span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><p class="line874">With this script, moin instances will be started automatically on startup. <span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><ol type="1"><li><p class="line862">Install <a class="http" href="http://darwinports.opendarwin.org/getdp/">darwinports</a> <span class="anchor" id="line-269"></span></li><li><p class="line862">Install DarwinPortsStartup package: <span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-16"></span>sudo port install DarwinPortsStartup</pre><span class="anchor" id="line-272"></span></li><li><p class="line862">Copy moin.sh into <tt class="backtick">/opt/local/etc/rc.d</tt>: <span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-17"></span>sudo cp moin.sh /opt/local/etc/rc.d</pre><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span></li></ol><p class="line867">
<h3 id="Using_HTTP_Authentication">Using HTTP Authentication</h3>
<span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><p class="line874">lighttpd mod_fastcgi does not add the AUTH_TYPE variable to the cgi environment, which will cause http auth in moin to fail.   <span class="anchor" id="line-279"></span>See <a class="http" href="http://trac.lighttpd.net/trac/ticket/889">http://trac.lighttpd.net/trac/ticket/889</a> for more information, and an attached diff file to correct to issue. <span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><p class="line867">
<h3 id="Root_wiki_example">Root wiki example</h3>
<span class="anchor" id="line-282"></span><p class="line867"><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-18"></span>$HTTP["host"] =~ "(www.)?wiki.foo.bar" {
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-10"></span>    alias.url = (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-7"></span>        "/wiki" =&gt; "/home/wiki/foo/public_html/"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-6"></span>    )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-6"></span>    $HTTP["url"] !~ "^/wiki" {
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6-5"></span>        setenv.add-request-header = ( "X-Moin-Location" =&gt; "/")
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7-5"></span>        fastcgi.server += (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-8-4"></span>            "/" =&gt; (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9-4"></span>                "wiki.foo.bar" =&gt; (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10-4"></span>                    "docroot" =&gt; "/",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-11-3"></span>                    "socket" =&gt; "/tmp/foo-lighttpd.sock",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-12-3"></span>                    "bin-path" =&gt; "/home/services/lighttpd/bin/execwrap",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-13-2"></span>                    "check-local" =&gt; "disable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-14-2"></span>                    "max-procs" =&gt; 4,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-15-1"></span>                    "min-procs" =&gt; 1,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-16-1"></span>                    "bin-environment" =&gt; (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-17-1"></span>                        "UID" =&gt; "50017", # foo
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-18-1"></span>                        "GID" =&gt; "1000", # users
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-19-1"></span>                        "TARGET" =&gt; "/home/wiki/foo/moin.fcg",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-20-1"></span>                        "CHECK_GID" =&gt; "1"
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-21-1"></span>                    )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-22-1"></span>                )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-23-1"></span>            )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-24-1"></span>        )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-25-1"></span>    }
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-26-1"></span>}</pre><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><p class="line874">notes: <span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span><p class="line862">This runs a root wiki (<a class="http" href="http://wiki.foo.bar/PageName">http://wiki.foo.bar/PageName</a>) as a different user. <span class="anchor" id="line-314"></span>The paths to execwrap, moin.fcg and public_html need to be customized. <span class="anchor" id="line-315"></span>And the UID too, of course, and possibly GID. <span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><p class="line867">
<h3 id="A.28sub.29domain_root_wiki">(sub)domain root wiki</h3>
<span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><p class="line874">This is a sample configuration for a single wiki, located at the root of a (sub)domain. <span class="anchor" id="line-320"></span>First, an instance has to be created, following the instructions at <a href="/group/HelpOnInstalling/WikiInstanceCreation">HelpOnInstalling/WikiInstanceCreation</a>. <span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><p class="line867">
<h4 id="lighttpd_configuration">lighttpd configuration</h4>
<span class="anchor" id="line-323"></span><p class="line867"><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-19"></span>$HTTP["host"] == "wiki.example.org" { 
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-11"></span>        alias.url += (  "/moin_static/" =&gt; "/usr/share/moin/htdocs/" )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-3-8"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-4-7"></span>        url.rewrite-once = (
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-5-7"></span>                          "^/robots.txt" =&gt; "/moin_static/robots.txt",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-6-6"></span>                        "^/favicon.ico" =&gt; "/moin_static/favicon.ico",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-7-6"></span>                          "/moin_static[^/]*/(.*)" =&gt; "/moin_static/$1",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-8-5"></span>                        "^/(.*)" =&gt; "/wiki/$1", )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9-5"></span>        fastcgi.server = ( "/wiki" =&gt;
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10-5"></span>                               ((
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-11-4"></span>                                   "docroot" =&gt; "/",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-12-4"></span>                                   "host" =&gt; "127.0.0.1",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-13-3"></span>                                   "bin-path"  =&gt; "/usr/share/moin/strigo/moin.fcg",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-14-3"></span>                                   "port" =&gt; 8888,
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-15-2"></span>                                   "check-local" =&gt; "disable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-16-2"></span>                                   "broken-scriptfilename" =&gt; "enable",
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-17-2"></span>                                 ))
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-18-2"></span>                        )
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-19-2"></span>}</pre><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><p class="line867">
<h4 id="MoinMoin_configration">MoinMoin configration</h4>
<span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span><p class="line874">Besides the normal Python path configuration, we need to specify explicitly that the request handler works at the "root" (moin.fcg): <span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span><p class="line867"><span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-1-20"></span>    #properties = {}
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-2-12"></span>    properties = {'script_name': '/'}</pre><span class="anchor" id="line-354"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>


