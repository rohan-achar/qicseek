<html>
<HEAD>
<TITLE>Source Code | Super-EGO &epsilon;-join</TITLE>
<META NAME="description"
 CONTENT = "Source Code, Super-EGO join code, &epsilon;-join code, similarity join code, multi-dimensional join code, high-dimensional join code, Euclidean Space">
<META NAME="keywords"
 CONTENT = "Source Code, Super-EGO join code, &epsilon;-join code, similarity join code, multi-dimensional join code, high-dimensional join code, Euclidean Space">

<style type="text/css">
table.sample {
    border-width: 1px;
    border-spacing: ;
    border-style: solid;
    border-color: grey;
    border-collapse: collapse;
    background-color: ;

}
table.sample th {
    border-width: 0px;
    padding: 10px;
    border-style: none;
    border-color: blue;
    background-color: #faf0e6;
    -moz-border-radius: ;

}
table.sample td {
    border-width: 0px;
    padding: 10px;
    border-style: none;
    border-color: blue;
    background-color: ##f5f5f5;
    -moz-border-radius: ;
    font-family: Arial,Helvetica;
    font-size: 11pt;
}

h2 {
font-family: "Arial,Helvetica";
color: #818501;
}

h3 {
font-family: "Arial,Helvetica";
color: #818501;
font-size: 16pt;
}

h4 {
font-family: "Arial,Helvetica";
font-weight: normal;
color: #818501;
font-size: 14pt;
}

font {
font-family: Arial,Helvetica;
font-size: 11pt;
}
</style>

</HEAD>

<body text="#000000" vlink="#4f4f4f" alink="#818501" link="#818501" bgcolor="#ffffff">

<p align="center">
        <TABLE width="800" border="0" bgcolor="#f5f5f5" cellspacing="10" ID="Table1" class="sample">
        <TBODY>
        <TR>
        <TD>

<H3>Source Code of Super-EGO &epsilon;-join</H3>

<font color="grey">Last updated: 2/13/2013</font> 

<H4>Introduction</H4>
</center>

<p align =justify >
Super-EGO is a very fast in-memory algorithm that performs a well-studied similarity join 
operation known as <dfn>&epsilon;-join</dfn>.

Given two d-dimensional datasets A and B and 
parameter &epsilon;, the task of &epsilon;-join is to find all pairs of points (a,b), 
where a &isin; A and b &isin; B, such that the distance between them |a-b| &le; &epsilon;. 
Most often the Euclidean distance is used to compute the distance |a-b|, or distance is defined as Lp norm. 

This operation is often employed in data-mining and other areas for finding all pairs of 
similar objects, where objects are first mapped into their "feature" representation in 
d-dimensional space. The challenge is to perform &epsilon;-join <em>efficiently</em>, and Super-EGO 
achieves the state of the art results. 
</p>

<H4>How to Cite</H4>
When using Super-EGO code, please cite it as:<br/>
<br/>
<list>
	<li>Dmitri V. Kalashnikov. Super-EGO: Fast multi-dimensional similarity join. 
	<em>VLDB Journal</em>, 2013 [<A href="http://www.ics.uci.edu/~dvk/pub/VLDBJ13_dvk.pdf">Download Paper</A>]</li>
</list>
<br/>
The above publication describes Super-EGO in detail. A BibTeX entry for this publications is:

<pre>
@article{VLDBJ13::dvk,
   author    = {Dmitri V.\ Kalashnikov},
   title     = {Super-{EGO}: Fast Multi-Dimensional Similarity Join},
   journal   = {VLDB Journal},
   year      = {2013}
}
</pre>

<H4>Downloading Code</H4>
<list>
	<li>Super-EGO code can de downloaded from here: 
	[<A href="http://www.ics.uci.edu/~dvk/code/SuperEGO_code.zip">SuperEGO_code.zip</A>] 
	[<A href="http://www.ics.uci.edu/~dvk/code/License.txt">License</A>] 
	[<A href="http://www.ics.uci.edu/~dvk/code/SuperEGO_data.zip">SuperEGO_data.zip</A>]</li>
	<li>Super-EGO is implemented in C++</li>
	<li>The code is designed for UNIX in general</li> 
	<li>The code has been tested only under Mac OS X Ver 10.8.2</li>
	<li>GCC 4.7 has been used to compile the code.</li> 
	<li>To install GCC 4.7 on a Mac, install macport. Then <tt>sudo port install gcc47</tt></li>
	<li>Code generated by GCC is faster than that by the default compiler.</li>
</list>

<H4>Compiling Code</H4>
<list>
	<li>Unzip <tt>SuperEGO_code.zip</tt> file. The code is inside <tt>Super-EGO</tt> folder. The main file is <tt>test.cpp</tt>.</li>
	<li>Unzip the sample dataset file. The resulting file is <tt>ColorHist.txt</tt>.</li> 
	<li>Edit <tt>const.h</tt> file to set the desired data dimensionality (<tt>NUM_DIM</tt>) and the path to the input file (<tt>DATA_FILE</tt>).</li>
	<li>Edit <tt>./mak</tt> batch file: change the path of GCC's C++ compiler (<tt>g++</tt>) to where it is located in your system.</li>  
	<li>To compile, run <tt>./mak</tt> inside <tt>Super-EGO</tt> folder.</li>
	<li>Compilation will produce executable file called <tt>index</tt>.</li>

            
<H4>Running Code</H4>
            
<tt>./index eps A_sz B_sz skew num_thread</tt>

            
<H4>Options</H4>
            <table width="100%">
                <tr height=40>
                    <td width="25%"><tt>eps</tt></td>
                    <td width="75%">The value of &epsilon; to use in the &epsilon;-join.</td>
                </tr>
                <tr height=40>
                    <td width="25%"><tt>A_sz</tt></td>
                    <td width="75%">Cardinilaity |A| of dataset A, in thousands. E.g., specifying 68 corresponds to |A| = 68,000.</td>
                </tr>
                <tr height=40>
                    <td width="25%"><tt>B_sz</tt></td>
                    <td width="75%">Cardinilaity |B| of dataset B, in thousands. E.g., specifying 25 corresponds to |B| = 25,000.</td>
                </tr>
                
                <tr height=40>
                    <td width="25%"><tt>skew</tt></td>
                    <td width="75%">Parameter <tt>skew</tt> can be set to 0, 2, or 3 to mean:<font size=4><br><br></font>
                        <tt>0</tt> - uniform: the code will generate uniform A and B d-dimensional datasets.<br>
                        <tt>2</tt> - from file: the code will load d-dimensional data from the file specified in <tt>const.h</tt>.<br>
                        <tt>3</tt> - uniform self-join: the code will generate uniform A, and then join it with itself.
                    </td>
                </tr>
                <tr height=40>
                    <td width="25%"><tt>num_thread</tt></td>
                    <td width="75%">The number of parallel threads of execution to use. The best number typically corresponds to the level of parallelism the machine has. It also can be determined experimentally, once per machine, by increasing it starting from 1 and observing for which value the performance is the best.</td>
                </tr>
            </table>
            
            

<H4>Examples</H4>
1) Performing an &epsilon;-join on uniform datasets A and B, for &epsilon; = 0.1 and where |A| = 68,000 and |B| = 25,000 and the number of threads is 8. The dimensionality d of the generated data in A and B will be determinied by <tt>NUM_DIM</tt> varible from <tt>const.h</tt> file.<br>
<br>
<tt>./index 0.1 68 25 0 8</tt><br>
            <br>
            <br>
<br>
2) Performing an self-join of uniform datasets A, for &epsilon; = 0.2 and where |A| = 45,000 and the number of threads is 4. The dimensionality d of the generated data in A will be determinied by <tt>NUM_DIM</tt> varible from <tt>const.h</tt> file.<br>
<br>
<tt>./index 0.2 45 45 3 4</tt><br>
            <br>
            <br>
<br>
3) Performing an self-join of a real dataset ColorHist, for &epsilon; = 0.1 whose cardiniality is 68,000 using 8 threads. In <tt>const.h</tt>, variables <tt>NUM_DIM</tt> and <tt>DATA_FILE</tt> should be set to 32 and to the path of <tt>ColorHist.txt</tt>, respectively and the code should be recompiled.<br>
<br>
<tt>./index 0.1 68 68 2 8</tt><br>
            


            
            
<IMG SRC="https://students.ics.uci.edu/~dvk/fig.cgi?SuperEGO_code" width=1 height=1>
</p>
<BR>
<BR>
<A href="http://www.ics.uci.edu/~dvk/index.html">Back to Kalashnikov's homepage</A>
<BR>
<BR>
<center><font face="Arial,Helvetica" style="font-SIZE: 8pt" color="gray"> Copyright &copy; 2013 Dmitri V. Kalashnikov. All Rights Reserved.</font></center>
</html> 
